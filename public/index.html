<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèØ Khmer Rek - Temple of Strategy</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Koulen&family=Preahvihear&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Background particles -->
    <div class="particles"></div>

    <!-- Main Menu Screen -->
    <div id="mainMenu" class="screen active">
        <div class="among-us-bg">
            <div class="stars"></div>
            <div class="planets"></div>
        </div>
        
        <div class="main-header">
            <h1 class="game-title">·ûö·üÇ·ûÄ·ûÅ·üí·ûò·üÇ·ûö168</h1>
            <div class="game-subtitle">Strategic Board Game</div>
        </div>

        <div class="menu-panel">
            <div class="menu-buttons">
                <button id="playWithBotBtn" class="menu-btn bot-btn">
                    <div class="btn-icon">ü§ñ</div>
                    <div class="btn-content">
                        <div class="btn-title">SINGLE PLAYER</div>
                        <div class="btn-subtitle">Play vs Smart AI</div>
                    </div>
                </button>

                <button id="createRoomBtn" class="menu-btn create-btn">
                    <div class="btn-icon">‚ûï</div>
                    <div class="btn-content">
                        <div class="btn-title">CREATE ROOM</div>
                        <div class="btn-subtitle">Play with Friends</div>
                    </div>
                </button>

                <button id="joinRoomBtn" class="menu-btn join-btn">
                    <div class="btn-icon">üö™</div>
                    <div class="btn-content">
                        <div class="btn-title">JOIN ROOM</div>
                        <div class="btn-subtitle">Enter Room Code</div>
                    </div>
                </button>

                <button id="publicRoomsBtn" class="menu-btn public-btn">
                    <div class="btn-icon">üåç</div>
                    <div class="btn-content">
                        <div class="btn-title">PUBLIC ROOMS</div>
                        <div class="btn-subtitle">Browse Available Games</div>
                    </div>
                </button>
            </div>
        </div>

        <!-- Join Room Modal -->
        <div id="joinRoomModal" class="among-modal" style="display: none;">
            <div class="modal-backdrop"></div>
            <div class="modal-panel">
                <div class="modal-header">
                    <h3>JOIN ROOM</h3>
                    <button id="closeJoinModal" class="close-btn">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="input-container">
                        <label>Room Code</label>
                        <input type="text" id="roomInput" placeholder="Enter 6-digit code" maxlength="10">
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="confirmJoinBtn" class="confirm-btn">JOIN</button>
                </div>
            </div>
        </div>

        <!-- Public Rooms Modal -->
        <div id="publicRoomsModal" class="among-modal" style="display: none;">
            <div class="modal-backdrop"></div>
            <div class="modal-panel">
                <div class="modal-header">
                    <h3>PUBLIC ROOMS</h3>
                    <button id="closePublicModal" class="close-btn">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="room-list-container">
                        <button id="refreshRoomsBtn" class="refresh-btn">üîÑ REFRESH</button>
                        <div id="roomList" class="room-list">
                            <div class="loading-rooms">Loading rooms...</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Room Settings Modal -->
        <div id="roomSettingsModal" class="among-modal" style="display: none;">
            <div class="modal-backdrop"></div>
            <div class="modal-panel">
                <div class="modal-header">
                    <h3>ROOM SETTINGS</h3>
                    <button id="closeSettingsModal" class="close-btn">‚úï</button>
                </div>
                <div class="modal-body">
                    <div class="room-settings">
                        <label class="room-setting">
                            <input type="radio" name="roomType" value="public" checked>
                            <div class="setting-content">
                                <div class="setting-title">üåç Public Room</div>
                                <div class="setting-desc">Visible to everyone</div>
                            </div>
                        </label>
                        <label class="room-setting">
                            <input type="radio" name="roomType" value="private">
                            <div class="setting-content">
                                <div class="setting-title">üîí Private Room</div>
                                <div class="setting-desc">Hidden from public list</div>
                            </div>
                        </label>
                    </div>
                </div>
                <div class="modal-footer">
                    <button id="confirmCreateBtn" class="confirm-btn">CREATE</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen" class="screen">
        <!-- Game Header -->
        <div class="game-header">
            <div class="player-info" id="topPlayer">
                <div class="player-piece" id="topPlayerPiece"></div>
                <span class="player-name" id="topPlayerName">Opponent</span>
                <div class="turn-indicator" id="topPlayerTurn"></div>
            </div>

            <div class="room-info">
                <span id="roomCode">Room: </span>
                <button id="copyRoomBtn" class="copy-btn" style="display: none;">üìã Copy</button>
            </div>

            <div class="player-info" id="bottomPlayer">
                <div class="player-piece" id="bottomPlayerPiece"></div>
                <span class="player-name" id="bottomPlayerName">You</span>
                <div class="turn-indicator" id="bottomPlayerTurn"></div>
            </div>
        </div>

        <!-- Game Board -->
        <div class="board-container">
            <div class="board-orientation" id="boardOrientation">
                <span class="orientation-text" id="orientationText">Your pieces are at the bottom</span>
            </div>
            <div id="gameBoard" class="game-board">
                <!-- Board squares will be generated by JavaScript -->
            </div>
        </div>

        <!-- Game Status -->
        <div class="game-status">
            <p id="statusMessage">Waiting for opponent...</p>
            <div id="waitingControls" class="waiting-controls" style="display: none;">
                <button id="exitRoomBtn" class="btn-secondary">üö™ Exit Room</button>
            </div>
            <div id="gameStartControls" class="game-start-controls" style="display: none;">
                <button id="startGameBtn" class="btn-primary">üéÆ Start Game</button>
                <button id="exitLobbyBtn" class="btn-secondary">üö™ Exit Room</button>
                <p class="start-info">Both players must click "Start Game" to begin</p>
            </div>
            <div id="gameStartCountdown" class="game-countdown" style="display: none;">
                <p>Game starting in <span id="countdownNumber">3</span>...</p>
            </div>
            <div id="gameplayControls" class="gameplay-controls" style="display: none;">
                <div class="game-actions">
                    <button id="requestRestartBtn" class="game-btn restart-btn">
                        <span class="btn-icon">üîÑ</span>
                        <span class="btn-text">RESTART</span>
                    </button>
                    <button id="exitBotGameBtn" class="game-btn exit-btn" style="display: none;">
                        <span class="btn-icon">üö™</span>
                        <span class="btn-text">EXIT</span>
                    </button>
                </div>
            </div>
        </div>

        <!-- Chat Box -->
        <div class="chat-container">
            <div class="chat-header">
                <h3>Room Chat</h3>
            </div>
            <div class="chat-messages" id="chatMessages">
                <!-- Messages will appear here -->
            </div>
            <div class="chat-input">
                <input type="text" id="messageInput" placeholder="Type your message..." maxlength="100">
                <button id="sendMessageBtn">Send</button>
            </div>
        </div>
    </div>

    <!-- Game Over Modal -->
    <div id="gameOverModal" class="modal">
        <div class="modal-content">
            <div class="winner-announcement">
                <div class="golden-frame">
                    <h2 id="winnerText">Victory!</h2>
                    <div class="victory-icon">üëë</div>
                    <p id="winnerMessage">The temple acknowledges your wisdom!</p>
                </div>
            </div>

            <div class="modal-actions">
                <button id="playAgainBtn" class="btn-primary">‚öîÔ∏è Battle Again</button>
                <button id="exitGameBtn" class="btn-secondary">üö™ Leave Room</button>
            </div>
        </div>
    </div>



    <!-- Loading Screen -->
    <div id="loadingScreen" class="screen">
        <div class="loading-content">
            <div class="temple-loader">
                <div class="loader-ring"></div>
                <div class="loader-text">Connecting to Room...</div>
            </div>
        </div>
    </div>

    <!-- Audio System -->
    <div id="audioSystem" style="display: none;">
        <!-- Background Music -->
        <audio id="bgMusic" loop preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
        </audio>
        
        <!-- Sound Effects -->
        <audio id="clickSound" preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
        </audio>
        
        <audio id="moveSound" preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
        </audio>
        
        <audio id="captureSound" preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
        </audio>
        
        <audio id="winSound" preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
        </audio>
        
        <audio id="loseSound" preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
        </audio>
        
        <audio id="notificationSound" preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
        </audio>
        
        <audio id="errorSound" preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
        </audio>
        
        <audio id="joinSound" preload="auto">
            <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
        </audio>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script src="script.js"></script>
</body>

</html>